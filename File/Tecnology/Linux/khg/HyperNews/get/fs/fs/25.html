
<HTML>
<HEAD>
<TITLE>possible deadlock with getblk() !?</TITLE>
<LINK rel="owner" href="mailto:">
<SCRIPT LANGUAGE="JavaScript">
<!-- hide this

function help(message) {
  self.status = message;
  return true;
}
// stop hiding -->
</SCRIPT>

</HEAD>
<BODY>
<strong>The
<a href="http://www.hypernews.org/HyperNews/get/hypernews.html">
HyperNews <a href="../../khg.html">Linux KHG</a>
Discussion Pages</strong>
<hr>
<NOBR>





</NOBR><BR>
<H2><IMG src="../../../../Icons/warning.gif" ALT="Warning:"
  WIDTH=15 HEIGHT=15
  ALIGN="bottom">
possible deadlock with getblk() !?</H2>

<DL> <DD>
<NOBR>
<font size=+1><I>Forum:</I> <A HREF="../fs.html" >
 Filesystems</A> </font><BR>
<I>Keywords:</I> buffercache filesystem deadlock <BR>
<I>Date:</I> Sat, 16 May 1998 07:09:46 GMT <BR>
<I>From:</I> Arne Spetzler &lt;<A HREF="mailto:arne@smooth.netzservice.de" >arne@smooth.netzservice.de</A>&gt; <BR>

</NOBR>
</DD> </DL>

<P>
<table border cellpadding=5 cellspacing=0 
 width="100%" BGCOLOR="#FFFFFF">
 <tr><td>

Hi!
<P>

I'am trying to implement ACL's on the ext2 Filesystem.
To manipulate the ACL-Lists i use ext2_bread().
<P>

Now i found out, that in block_getblk() we try to getblk() a new block from the buffer cache without brelsing the old one.
<P>

On my opinion this is a possible deadlock situation, because getblk() waits foreever if there is no free block:
<P>

Imagin a couple off processes is requesting an indirekt block
(all from different inodes) and the System is very low on memory and every process gets the first block (for indirection) from the Inode. Imagin this is eating up all blocks left... sure very unlikely but theoretically.
<P>

Then none of them is ever getting the desired block - instead sleeping forever :-(
<P>

regards
<P>

Arne
<P>

</td></tr>
</table>
<P><NOBR>





</NOBR><BR>

<P>
<P>



  






<BR> 
 
<BR></BODY>
</HTML>
