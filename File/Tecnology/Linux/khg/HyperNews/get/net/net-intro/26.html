
<HTML>
<HEAD>
<TITLE>NE 2000 card messed up DMA data??</TITLE>
<LINK rel="owner" href="mailto:">
<SCRIPT LANGUAGE="JavaScript">
<!-- hide this

function help(message) {
  self.status = message;
  return true;
}
// stop hiding -->
</SCRIPT>

</HEAD>
<BODY>
<strong>The
HyperNews <a href="../../khg.html">Linux KHG</a>
Discussion Pages</strong>
<hr>
<NOBR>





</NOBR><BR>
<H2><IMG src="../../../../Icons/question.gif" ALT="Question:"
  WIDTH=15 HEIGHT=15
  ALIGN="bottom">
NE 2000 card messed up DMA data??</H2>

<DL> <DD>
<NOBR>
<font size=+1><I>Forum:</I> <A HREF="../net-intro.html" >
 Network Buffers And Memory Management</A> </font><BR>
<I>Date:</I> Tue, 11 Nov 1997 23:39:06 GMT <BR>
<I>From:</I> Jim Cao &lt;<A HREF="mailto:jcao@regentec.com" >jcao@regentec.com</A>&gt; <BR>

</NOBR>
</DD> </DL>

<P>
<table border cellpadding=5 cellspacing=0 
 width="100%" BGCOLOR="#FFFFFF">
 <tr><td>


I am writing a teletext device driver on Linux 2.0.30
(upgraded from RedHat 4.1) which uses IRQ 3 (No option
because of the card's jumper), DMA channel 3 and IO port 0x2A0-0x2A3. The driver works perfectly
on a standalone system. All of these resources are registered with Linux kernel functions provided. After I 
added a NE2000 compatible Ethernet card to the system 
and recompiled the kernel to support TCP/IP and NE 2000,
everything was still working fine. NE2000 IO-port is configured to 0x300 and IRQ 10. After checked the system log
file and /proc/*, no conflict was found after the system 
booted up. NOW, comes the problem! As long as I connect
the network cable to the ethernet card, the DMA data of my
driver is getting lose and totally messed up after a 
while. Does NE2000 uses some DMA stuff which conflicts 
with DMA channel 3. I scanned the 8390.c and ne.c in the drivers/net directory but no idea how remote DMA works in 
the code and it seems no general DMA operation at all. 
Anyone got the similiar problem before or have some
suggestion to get around the problem?  
<P>

Thanks!
<P>

-Jim Cao
<P>

</td></tr>
</table>
<P><NOBR>





</NOBR><BR>

<P>
<P>



  






<BR> 
 
<BR></BODY>
</HTML>
