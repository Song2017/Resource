
<HTML>
<HEAD>
<TITLE>question RE: syscalls on 2.o.x &amp; up</TITLE>
<LINK rel="owner" href="mailto:">
<SCRIPT LANGUAGE="JavaScript">
<!-- hide this

function help(message) {
  self.status = message;
  return true;
}
// stop hiding -->
</SCRIPT>

</HEAD>
<BODY>
<strong>The
HyperNews <a href="../../khg.html">Linux KHG</a>
Discussion Pages</strong>
<hr>
<NOBR>





</NOBR><BR>
<H2><IMG src="../../../../Icons/more.gif" ALT="More:"
  WIDTH=15 HEIGHT=15
  ALIGN="bottom">
question RE: syscalls on 2.o.x &amp; up</H2>

<DL> <DD>
<NOBR>
<font size=+1><I>Forum:</I> <A HREF="../syscall86.html" >
 How System Calls Work on Linux/i86</A> </font><BR>
<I>Keywords:</I> syscall system call  <BR>
<I>Date:</I> Thu, 09 Oct 1997 10:43:04 GMT <BR>
<I>From:</I> <A HREF="http://isunix.it.ilstu.edu/~thockin" >Tim Hockin</A> &lt;<A HREF="mailto:thockin@ais.net" >thockin@ais.net</A>&gt; <BR>

</NOBR>
</DD> </DL>

<P>
<table border cellpadding=5 cellspacing=0 
 width="100%" BGCOLOR="#FFFFFF">
 <tr><td>
<tt>
I have started digging up info on hw syscalls work, and I have been successful.  I added my custom sys_ routine, added my __NR_?????  to &lt;asm/unistd.h&gt;.  My question comes with Entry.S<BR>
<BR>
near the end of the file we see:<BR>
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;.long SYMBOL_NAME(sys_sched_get_priority_min)  /* 160 */<BR>
&nbsp;&nbsp;&nbsp;&nbsp;.long SYMBOL_NAME(sys_sched_rr_get_interval)<BR>
&nbsp;&nbsp;&nbsp;&nbsp;.long SYMBOL_NAME(sys_nanosleep)<BR>
&nbsp;&nbsp;&nbsp;&nbsp;.long SYMBOL_NAME(sys_mremap)<BR>
&nbsp;&nbsp;&nbsp;&nbsp;.long 0,0<BR>
&nbsp;&nbsp;&nbsp;&nbsp;.long SYMBOL_NAME(sys_vm86)<BR>
&nbsp;&nbsp;&nbsp;&nbsp;.space (NR_syscalls-166)*4<BR>
<BR>
so sys_mremap is #163.  If I add my own syscall as 164 (assuming that was what my __NR_ was #defined to)<BR>
<BR>
do I put my own ".long SYMBOL_NAME ..." before or after ".long 0,0"?  And then, do I need to change the hardcoded 166 to 167 in ".space ..." ?<BR>
<BR>
Anything else I need to do?  It seems to work, but I am not 100% sure.  All in all, figuring out the assembler was tricky, but this page helped TONS!<BR>
<BR>
looking forward to some answers!<BR>
<BR>
Thanks<BR>
Tim Hockin<BR>
<A HREF="mailto:thockin@ais.net">thockin@ais.net</A>
</tt>

</td></tr>
</table>
<P><NOBR>





</NOBR><BR>
<P><B><A NAME="Messages">Messages</A></B>
<NOBR>
<font size=-1>







</font>
</NOBR>
 <P>
<NOBR>
<DL COMPACT>
<DT> 1. <IMG src="../../../../Icons/feedback.gif" ALT="Feedback:" WIDTH=15 HEIGHT=15 ALIGN="absmiddle">
<A HREF="7/1.html">
Where to add the syscall</A> <i> by <A HREF="../../../../~johnsonm">Michael K. Johnson</A></i>
 <IMG SRC="../../../../Icons/newest.gif" ALT="newest" WIDTH=31 HEIGHT=12
  ALIGN="bottom"> </DT>
</DL>
</NOBR>

<P>
<P>



  






<BR> 
 
<BR></BODY>
</HTML>
